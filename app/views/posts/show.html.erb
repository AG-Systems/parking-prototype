<div class="panel panel-default">
  <div class="panel-heading">
    <h1 class="panel-title"><%= @post.title %></h1>
  </div>
  <div style='width: 100%;'>
    <div id="geolocation" style='width: 100%; height: 400px;'></div>
  </div>
  <div class="panel-body">
    <%= @post.contact %>
  </div>
  <div class="panel-body">
    $<%= @post.price %> for <%= @post.duration %> minutes
   </div>
  <div class="panel-body">
    <%= @post.address %>
  </div>
</div>
<script>
    var lat = <%= @post.lat %>
    var lng = <%= @post.lng %>
var handler = Gmaps.build('Google');
handler.buildMap({ internal: {id: 'geolocation'} }, function(){
  // be aware chrome >= 50 requires https for geolocation to work
  if(navigator.geolocation)
    navigator.geolocation.getCurrentPosition(displayOnMap);
});

function displayOnMap(position){
  var marker = handler.addMarker({
    lat: lat,
    lng: lng
  });
  handler.map.centerOn(marker);
  handler.getMap().setZoom(14);
};
     
    
</script>
<%= render :template => "charges/new" %> 